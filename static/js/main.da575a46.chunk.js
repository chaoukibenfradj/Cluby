(this.webpackJsonpcluby=this.webpackJsonpcluby||[]).push([[0],{139:function(e,t,a){e.exports=a.p+"static/media/logo-light.7ee40555.png"},230:function(e,t,a){e.exports=a(460)},300:function(e,t,a){},311:function(e,t,a){},451:function(e,t,a){},452:function(e,t,a){},453:function(e,t,a){},455:function(e,t,a){},456:function(e,t,a){},457:function(e,t,a){},458:function(e,t,a){},459:function(e,t,a){},460:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),i=a.n(s),l=(a(95),a(19)),o=a(20),c=a(22),u=a(21),m=a(23),d=a(32),p=a(468),h=a(71),f=a(465),E=a(475),v=a(9),b=a(462),g=a(463),y=a(70),S=a(464),w=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleUserPopoverVisible=function(e){a.setState({isUserPopoverVisible:e})},a.onSignOut=function(){it(null),a.props.history.push("/sign-in")},a.onEditProfile=function(){a.props.history.push("/edit-profile")},a.state={isUserPopoverVisible:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getCurrentUserInitials",value:function(){var e="";return this.props.currentUser&&this.props.currentUser.firstName&&this.props.currentUser.firstName.length>0&&this.props.currentUser.lastName&&this.props.currentUser.lastName.length>0&&(e=this.props.currentUser.firstName.charAt(0).toUpperCase()+this.props.currentUser.lastName.charAt(0).toUpperCase()),e}},{key:"render",value:function(){return r.a.createElement(b.a,{content:r.a.createElement("div",{className:"popover-content"},r.a.createElement("div",{className:"popover-header"},r.a.createElement("p",{className:"fullname"},this.props.currentUser.firstName+" "+this.props.currentUser.lastName),r.a.createElement("p",{className:"email"},this.props.currentUser.email)),r.a.createElement(g.a,null),r.a.createElement("div",{className:"popover-actions"},r.a.createElement(y.a,{type:"link",onClick:this.onEditProfile},"Edit profile"),r.a.createElement(y.a,{type:"link",onClick:this.onSignOut},"Sign out"))),placement:"bottomRight",trigger:"click",visible:this.state.isUserPopoverVisible,onVisibleChange:this.handleUserPopoverVisible},this.getCurrentUserInitials()&&this.getCurrentUserInitials().length>0?r.a.createElement(S.a,null,this.getCurrentUserInitials()):r.a.createElement(S.a,{icon:"user"}))}}]),t}(n.Component),N=Object(h.f)(w),k=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("h2",null,"dashboard")}}]),t}(n.Component),O=a(63),C=a(469),j=a(473),I=a(54),D=a(477),L=a(93),P=a(94),U=a(25),M=a.n(U),x=a(28),R=a(26),T=a.n(R),Y="https://cors-any-chaouki.herokuapp.com/https://cluby1.herokuapp.com/",F={apiKey:"AIzaSyAM78zG2ciOXV0a4CexJCcyvMGLCyDzLWs",authDomain:"platedetectorproject.firebaseapp.com",databaseURL:"https://platedetectorproject.firebaseio.com",projectId:"platedetectorproject",storageBucket:"platedetectorproject.appspot.com",messagingSenderId:"824986743444",appId:"1:824986743444:web:4a85c0f9a3b30f0072ba81"};var A=a(10),q=a.n(A),V=function(){var e=Object(x.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(Y+"api/v1/events");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(x.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(Y+"api/v1/events/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(x.a)(M.a.mark((function e(t,a){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.delete(Y+"api/v1/events/participate",{data:{eventId:t,userId:a},headers:{"Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(x.a)(M.a.mark((function e(t,a){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post(Y+"api/v1/events/participate",{eventId:t,userId:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(x.a)(M.a.mark((function e(t,a){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={Name:t.name,BeginDate:q()(t.dateTime[0]).toISOString(),EndDate:q()(t.dateTime[1]).toISOString(),price:t.price,Photo:t.photo,Description:t.description,Location:t.location,Domain:t.domain,Club:a,Institute:t.institute,NumberParticipation:Number(t.NumberParticipation)},console.log("Add Body",n),e.next=4,T.a.post(Y+"api/v1/events",n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(x.a)(M.a.mark((function e(t,a){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={Id:a,Name:t.name,BeginDate:q()(t.dateTime[0]).toISOString(),EndDate:q()(t.dateTime[1]).toISOString(),price:t.price,Photo:t.photo,Description:t.description,Location:t.location,Domain:t.domain,Institute:t.institute,NumberParticipation:Number(t.NumberParticipation)},console.log("body for update : ",n),e.next=4,T.a.put(Y+"api/v1/events",n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(x.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(Y+"api/v1/events/club/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(x.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(Y+"api/v1/events/participationEvent/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(x.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.delete(Y+"api/v1/events/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=a(69),K=a.n(X),Z=(a(300),a(479)),Q=a(472),ee=a(476),te=a(474),ae=a(471),ne=a(466),re=a(467),se=function(){var e=Object(x.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(Y+"/api/v1/institutes");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(x.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(Y+"api/v1/domains");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=a(171),oe=a.n(le),ce=function(){var e=Object(x.a)(M.a.mark((function e(t){var a,n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Blob([t],{type:"image/jpeg"}),oe.a.initializeApp(F),n=oe.a.storage().ref("/events/"),r=(new Date).valueOf()+"-"+t.name,e.next=6,n.child(r).put(a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=(a(311),O.a.Option);var me=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},a.onAddEvent=function(e){e.preventDefault(),a.state.isUpdate?(console.log("Gonna Update and see changes "),a.props.form.validateFields((function(e,t){var n={name:t.name,beginDate:q()(t.dateTime[0]).toISOString(),endDate:q()(t.dateTime[1]).toISOString(),price:t.price,description:t.description,location:t.location,domain:t.domain,institute:t.institute};console.log(t),delete n.club,delete n.creationDate,delete n.photo;var r=Object.assign({},a.state.selectedEvent);r.institute=r.institute.id,r.domain=r.domain.id,delete r.club,delete r.id,delete r.numberParticipation,delete r.creationDate,delete r.photo,console.log("Changed Values : ",function e(t,a){var n={};if(!Object.is(t,a))return a&&"object"===typeof a?(Object.keys(t||{}).concat(Object.keys(a||{})).forEach((function(r){if(a[r]===t[r]||Object.is(t[r],a[r])||(n[r]=a[r]),"object"===typeof a[r]&&"object"===typeof t[r]){var s=e(t[r],a[r]);void 0!==s&&(n[r]=s)}})),n):a}(r,n)),t.photo=a.state.selectedEvent.photo,z(t,a.props.eventId).then((function(e){console.log(e),a.setState({visible:!1,isLoading:!1}),setTimeout((function(){window.location.reload()}),300)})).catch((function(e){console.log(e)}))}))):(a.setState({isLoading:!0}),console.log("Adding event"),a.props.form.validateFields((function(e,t){e||ce(t.upload[0].originFileObj).then((function(e){return e.ref.getDownloadURL()})).then((function(e){t.photo=e,J(t,a.state.clubId).then((function(e){console.log(e),console.log("Added successfully"),a.setState({visible:!1,isLoading:!1}),setTimeout((function(){window.location.reload()}),300)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})))},console.log("Add Event props :",e),a.state={visible:!1,clubId:localStorage.getItem("clubId"),listInstitutes:[],eventsInSameDate:[],isUpdate:!(!a.props.isUpdate||"true"!==a.props.isUpdate),listEvents:[],listDomains:[],selectedEvent:{},isLoading:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props),this.props.isUpdate&&H(this.props.eventId).then((function(t){e.setState({selectedEvent:t.data}),console.log("Update component for event ",e.state.selectedEvent),e.props.form.setFieldsValue({name:t.data.name,dateTime:[q()(t.data.beginDate),q()(t.data.endDate)],price:t.data.price,description:t.data.description,location:t.data.location,domain:t.data.domain.id,institute:t.data.institute.id,NumberParticipation:t.data.numberParticipation})})).catch((function(e){console.log("Error",e)})),se().then((function(t){e.setState({listInstitutes:t.data})})).catch((function(e){console.log(e)})),ie().then((function(t){e.setState({listDomains:t.data})})).catch((function(e){console.log(e)})),V().then((function(t){console.log("List Events => ",t),e.setState({listEvents:t.data})})).catch((function(e){console.log(e)}))}},{key:"checkEventsSameDate",value:function(){var e=this;console.log("Check events in the same date"),this.props.form.validateFields((function(t,a){console.log("Selected date :",q()(a.dateTime[0]).toISOString());var n=e.state.listEvents.filter((function(e){return q()(e.beginDate).format("DD/MM/YYYY")===q()(a.dateTime[0]).format("DD/MM/YYYY")}));e.setState({eventsInSameDate:n})}))}},{key:"dateCellRender",value:function(e,t){var a=e.filter((function(e){return q()(e.beginDate).format("DD/MM/YYYY")===q()(t).format("DD/MM/YYYY")}));return console.log("Data cell rendrer",t),console.log(a.length),r.a.createElement("ul",{className:"events"},a.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(Z.a,{status:"warning",text:e.name}))})))}},{key:"openCalendar",value:function(){var e=this;Q.a.confirm({icon:"",title:"Event Calendar Briefing",width:"70vw",content:r.a.createElement("div",null,r.a.createElement(ee.a,{fullscreen:!1,mode:"month",dateCellRender:function(t){return e.dateCellRender(e.state.listEvents,t)}})),onOk:function(){},onCancel:function(){}})}},{key:"render",value:function(){var e,t=this,a=this.props.form,n=a.getFieldDecorator,s=a.getFieldsError,i=a.getFieldError,l=a.isFieldTouched;return r.a.createElement("div",null,r.a.createElement(y.a,{style:{float:"right",right:"5.5%"},className:"btn-secondary-solid",onClick:this.showDrawer},this.state.isUpdate?r.a.createElement("div",null,r.a.createElement(v.a,{type:"edit"})," Update Event"):r.a.createElement("div",null,r.a.createElement(v.a,{type:"plus"})," New Event")),r.a.createElement(te.a,{title:"Create a new event",width:720,onClose:this.onClose,visible:this.state.visible,bodyStyle:{paddingBottom:80}},r.a.createElement(ae.a,{layout:"vertical",hideRequiredMark:!0,onSubmit:this.onAddEvent},r.a.createElement(L.a,{gutter:16},r.a.createElement(I.a,{span:12},r.a.createElement(ae.a.Item,{validateStatus:l("name")&&i("name")?"error":"",help:l("name")&&i("name")||"",label:"Name"},n("name",{rules:[{required:!0,whitespace:!0,message:"Please enter the event name"}]})(r.a.createElement(j.a,{disabled:this.state.isLoading,placeholder:"Event name"})))),r.a.createElement(I.a,{span:12},r.a.createElement(ae.a.Item,{validateStatus:l("dateTime")&&i("dateTime")?"error":"",help:l("dateTime")&&i("dateTime")||"",label:r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("span",null,"Date"),r.a.createElement("span",{style:{color:"#ff4d4f",fontSize:"smaller"}},r.a.createElement("a",{onClick:function(){t.openCalendar()}},this.state.eventsInSameDate.length," events in the same date")))},n("dateTime",{rules:[{required:!0,message:"Please choose the dateTime"}]})(r.a.createElement(ne.a.RangePicker,{disabled:this.state.isLoading,style:{width:"100%"},disabledDate:function(e){return!e||e.isSameOrBefore(q()((new Date).toISOString(),"YYYY-MM-DD"))},showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",defaultValue:[q()((new Date).toISOString(),"YYYY-MM-DD"),q()((new Date).toISOString(),"YYYY-MM-DD")],getPopupContainer:function(e){return e.parentNode},onOk:function(){t.checkEventsSameDate()}}))))),r.a.createElement(L.a,{gutter:16},r.a.createElement(I.a,{span:12},r.a.createElement(ae.a.Item,{validateStatus:l("price")&&i("price")?"error":"",help:l("price")&&i("price")||"",label:"Price",style:{width:"15vw"}},n("price",{rules:[{required:!0,whitespace:!0,message:"Please enter event price"},{pattern:/^\d*[0-9]\d*$/,message:"Number needs to be provided"}]})(r.a.createElement(j.a,{disabled:this.state.isLoading,min:0,placeholder:"Price"})))),r.a.createElement(I.a,{span:12},r.a.createElement(ae.a.Item,{validateStatus:l("NumberParticipation")&&i("NumberParticipation")?"error":"",help:l("NumberParticipation")&&i("NumberParticipation")||"",label:"Number of Participators"},n("NumberParticipation",{rules:[{pattern:/^\d*[0-9]\d*$/,message:"Number needs to be provided"},{required:!0,whitespace:!0,message:"Please enter the number of participators"}]})(r.a.createElement(j.a,{disabled:this.state.isLoading,placeholder:"Number of Participators"})))),r.a.createElement(I.a,{span:12},r.a.createElement(ae.a.Item,{validateStatus:l("domain")&&i("domain")?"error":"",help:l("domain")&&i("domain")||"",label:"Domain"},n("domain",{rules:[{required:!0,whitespace:!0,message:"Please enter the event Domain"}]})(r.a.createElement(O.a,{disabled:this.state.isLoading,placeholder:"Please enter the event Domain"},this.state.listDomains.map((function(e){return r.a.createElement(ue,{value:e.id},e.name)})))))),r.a.createElement(I.a,{span:12},r.a.createElement(ae.a.Item,{validateStatus:l("institute")&&i("institute")?"error":"",help:l("institute")&&i("institute")||"",label:"Institute"},n("institute",{rules:[{required:!0,whitespace:!0,message:"Please select an Institute"}]})(r.a.createElement(O.a,{disabled:this.state.isLoading,placeholder:"Institute"},this.state.listInstitutes.map((function(e){return r.a.createElement(ue,{value:e.id},e.name)})))))),r.a.createElement(I.a,{span:12},r.a.createElement(ae.a.Item,{validateStatus:l("location")&&i("location")?"error":"",help:l("location")&&i("location")||"",label:"Location"},n("location",{rules:[{required:!0,whitespace:!0,message:"Please select a location"}]})(r.a.createElement(j.a,{disabled:this.state.isLoading,placeholder:"Location"}))))),this.state.isUpdate?"":r.a.createElement(L.a,{gutter:16},r.a.createElement(I.a,{span:12},r.a.createElement(ae.a.Item,{validateStatus:l("upload")&&i("upload")?"error":"",help:l("upload")&&i("upload")||"",label:"Upload picture"},n("upload",{valuePropName:"fileList",getValueFromEvent:this.normFile})(r.a.createElement(re.a,{disabled:this.state.isLoading,name:"logo",listType:"picture"},r.a.createElement(y.a,{disabled:this.state.isLoading},r.a.createElement(v.a,{type:"upload"})," Click to upload")))))),r.a.createElement(L.a,{gutter:16},r.a.createElement(I.a,{span:24},r.a.createElement(ae.a.Item,{validateStatus:l("description")&&i("description")?"error":"",help:l("description")&&i("description")||"",label:"Description"},n("description",{rules:[{required:!0,whitespace:!0,message:"Please enter the event description !"}]})(r.a.createElement(j.a.TextArea,{disabled:this.state.isLoading,rows:4,placeholder:"Description ..."}))))),r.a.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},r.a.createElement(y.a,{onClick:this.onClose,style:{marginRight:8}},"Cancel"),r.a.createElement(y.a,{className:"btn-secondary-solid",htmlType:"submit",loading:this.state.isLoading,disabled:(e=s(),console.log(e),console.log("Error=>",Object.keys(e).some((function(t){return e[t]}))),Object.keys(e).some((function(t){return e[t]})))},"Submit")))))}}]),t}(n.Component),de=ae.a.create()(me),pe=O.a.Option,he=C.a.Meta,fe=j.a.Search,Ee=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).createSkeleton=function(){for(var e=[],t=0;t<3;t++){for(var n=[],s=0;s<3;s++)n.push(r.a.createElement(I.a,{span:8,key:t+s},r.a.createElement(D.a,{loading:a.state.isLoading,active:!0},r.a.createElement(he,{title:"Loading",description:"Loading"}))));e.push(r.a.createElement(L.a,{gutter:[8,8],key:t},n))}return e},a.createEventRows=function(e){for(var t=[],n=[],s=[],i=0,l=e.length;i<l;i+=3)s=e.slice(i,i+3),n=[],s.forEach((function(e){n.push(r.a.createElement(I.a,{span:8,key:e.id,style:{display:"flex",alignItems:"center",flexDirection:"column"}},r.a.createElement(C.a,{onClick:function(){a.props.history.push("/events/event-details/".concat(e.id))},hoverable:!0,style:{width:"85%",borderRadius:"20px"},cover:r.a.createElement("img",{alt:"event-card",src:e.photo,onError:function(e){e.target.src=K.a}})},r.a.createElement(he,{title:r.a.createElement("div",{className:"event-details-card"},r.a.createElement("span",{className:"event-title"},e.name),r.a.createElement("span",{className:"event-price"},e.price," D.T.")),description:r.a.createElement("div",{className:"event-details-card"},r.a.createElement("span",{className:"text-limit"},e.description),r.a.createElement("span",{className:"event-date"},"Still ",q()(e.beginDate).diff(Date.now(),"days")," days !"))}))))})),t.push(r.a.createElement(L.a,{key:i,gutter:[8,32],type:"flex"},n));return t},a.onSearchInput=function(e){if(console.log(e),0==e.length)console.log("Reset List"),a.resetList();else{var t=a.state.listEventsInit.filter((function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>=0}));console.log(t),a.setState({listEventsSearch:t})}},a.resetList=function(){a.setState({listEventsSearch:a.state.listEventsInit})},a.state={listEventsInit:[],listEventsSearch:[],isLoading:!0,currentUser:JSON.parse(localStorage.getItem("CURRENT_USER")),fetchType:e.fetchType,domains:[],institutes:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;switch(this.setState({isLoading:!0}),this.state.fetchType){case"all":this.getEvents();break;case"club":this.getClubEvents();break;default:this.getEvents()}se().then((function(t){e.setState({institutes:t.data})})).catch((function(e){console.log(e)})),ie().then((function(t){e.setState({domains:t.data})})).catch((function(e){console.log(e)}))}},{key:"getEvents",value:function(){var e=this;V().then((function(t){console.log(t),e.setState({listEventsInit:t.data,listEventsSearch:t.data}),e.setState({isLoading:!1})})).catch((function(t){e.setState({isLoading:!1}),console.log(t)}))}},{key:"getClubEvents",value:function(){var e=this;W(localStorage.getItem("clubId")).then((function(t){console.log(t),e.setState({listEventsInit:t.data,listEventsSearch:t.data}),e.setState({isLoading:!1})})).catch((function(t){e.setState({isLoading:!1}),console.log(t)}))}},{key:"onChange",value:function(e){if(console.log(e),"all"===e)console.log("Reset List"),this.resetList();else{var t=this.state.listEventsInit.filter((function(t){return t.domain.id===e}));console.log(t),this.setState({listEventsSearch:t})}}},{key:"onChangeInst",value:function(e){if(console.log(e),"all"===e)console.log("Reset List"),this.resetList();else{var t=this.state.listEventsInit.filter((function(t){return t.institute.id===e}));console.log(t),this.setState({listEventsSearch:t})}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{padding:"30px",width:"100%"},className:"website-layout-view-container events-list"},r.a.createElement("div",null,this.state.currentUser&&"Club"===this.state.currentUser.role?r.a.createElement(de,null):""),r.a.createElement("div",{className:"search-section"},r.a.createElement("div",null,r.a.createElement(fe,{placeholder:"Search",onSearch:function(t){return e.onSearchInput(t)},style:{width:200}})),r.a.createElement("div",null,r.a.createElement(O.a,{showSearch:!0,style:{width:170},placeholder:"Domaine",optionFilterProp:"children",onChange:this.onChange.bind(this),onFocus:be,onBlur:ve,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},r.a.createElement(pe,{value:"all"},"All"),this.state.domains.map((function(e){return r.a.createElement(pe,{value:e.id},e.name)})))),r.a.createElement("div",{style:{marginLeft:"-55px"}},r.a.createElement(O.a,{showSearch:!0,style:{width:200},placeholder:"Institute",optionFilterProp:"children",onChange:this.onChangeInst.bind(this),onFocus:be,onBlur:ve,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},r.a.createElement(pe,{value:"all"},"All"),this.state.institutes.map((function(e){return r.a.createElement(pe,{value:e.id},e.name)})))),r.a.createElement("div",null)),r.a.createElement(g.a,null,"Events"),r.a.createElement("div",null,this.state.listEventsSearch&&this.state.listEventsSearch.length>0&&!this.state.isLoading?this.createEventRows(this.state.listEventsSearch):this.state.isLoading||0!==this.state.listEventsSearch.length?"":r.a.createElement(P.a,null),this.state.isLoading&&this.createSkeleton()))}}]),t}(n.Component);function ve(){console.log("blur")}function be(){console.log("focus")}var ge=function(){var e=Object(x.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(Y+"/api/v1/clubs");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=(a(451),C.a.Meta),Se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).createSkeleton=function(){for(var e=[],t=0;t<3;t++){for(var n=[],s=0;s<3;s++)n.push(r.a.createElement(I.a,{span:8,key:t+s},r.a.createElement(D.a,{loading:a.state.isLoading,active:!0},r.a.createElement(ye,{title:"Loading",description:"Loading"}))));e.push(r.a.createElement(L.a,{gutter:[8,8],key:t},n))}return e},a.createClubRows=function(e){for(var t=[],n=[],s=[],i=0,l=e.length;i<l;i+=3)s=e.slice(i,i+3),n=[],s.forEach((function(e){n.push(r.a.createElement(I.a,{span:8,key:e.id,style:{display:"flex",alignItems:"center",flexDirection:"column"}},r.a.createElement(C.a,{onClick:function(){a.props.history.push("/clubs/club-details/".concat(e.id))},hoverable:!0,style:{width:"25vw",borderRadius:"20px"},cover:r.a.createElement("img",{alt:"club-card",src:e.photo,onError:function(e){e.target.src=K.a}})},r.a.createElement(ye,{title:e.name,className:"text-limit",description:e.description}))))})),t.push(r.a.createElement(L.a,{key:i,gutter:[8,32],type:"flex"},n));return t},a.onSearchInput=function(e){if(console.log(e),0==e.length)console.log("Reset List"),a.resetList();else{var t=a.state.listClubsInit.filter((function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>=0}));console.log(t),a.setState({listClubsSearch:t})}},a.resetList=function(){a.setState({listClubsSearch:a.state.listClubsInit})},a.state={listClubsInit:[],listClubsSearch:[],isLoading:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),ge().then((function(t){e.setState({listClubsInit:t.data,listClubsSearch:t.data}),e.setState({isLoading:!1})})).catch((function(t){e.setState({isLoading:!1}),console.log(t)}))}},{key:"onChange",value:function(e){if(console.log(e),"--"===e)console.log("Reset List"),this.resetList();else{var t=this.state.listClubsInit.filter((function(t){return t.domain.toLowerCase().indexOf(e.toLowerCase())>=0}));console.log(t),this.setState({listClubsSearch:t})}}},{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"30px",width:"100%"},className:"website-layout-view-container clubs-list"},r.a.createElement(g.a,null,"Clubs"),r.a.createElement("div",null,this.state.listClubsSearch&&this.state.listClubsSearch.length>0&&!this.state.isLoading?this.createClubRows(this.state.listClubsSearch):this.state.isLoading||0!==this.state.listClubsSearch.length?"":r.a.createElement("div",{className:"center-div"},r.a.createElement(v.a,{className:"error-icon",type:"frown"}),"No Clubs"),this.state.isLoading&&this.createSkeleton()))}}]),t}(n.Component),we=function(){var e=Object(x.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(Y+"/api/v1/Sponsor");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=(a(452),C.a.Meta),ke=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).createSkeleton=function(){for(var e=[],t=0;t<3;t++){for(var n=[],s=0;s<3;s++)n.push(r.a.createElement(I.a,{span:8,key:t+s},r.a.createElement(D.a,{loading:a.state.isLoading,active:!0},r.a.createElement(Ne,{title:"Loading",description:"Loading"}))));e.push(r.a.createElement(L.a,{gutter:[8,8],key:t},n))}return e},a.createSponsorRows=function(e){for(var t=[],n=[],s=[],i=0,l=e.length;i<l;i+=3)s=e.slice(i,i+3),n=[],s.forEach((function(e){n.push(r.a.createElement(I.a,{span:8,key:e.id,style:{display:"flex",alignItems:"center",flexDirection:"column"}},r.a.createElement(C.a,{onClick:function(){a.props.history.push("/sponsors/sponsor-details/".concat(e.id))},hoverable:!0,style:{width:"25vw",borderRadius:"20px"},cover:r.a.createElement("img",{alt:"sponsor-card",src:e.photo,onError:function(e){e.target.src=K.a}})},r.a.createElement(Ne,{title:e.name,className:"text-limit",description:e.description}))))})),t.push(r.a.createElement(L.a,{key:i,gutter:[8,32],type:"flex"},n));return t},a.onSearchInput=function(e){if(console.log(e),0==e.length)console.log("Reset List"),a.resetList();else{var t=a.state.listSponsorsInit.filter((function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>=0}));console.log(t),a.setState({listSponsorsSearch:t})}},a.resetList=function(){a.setState({listSponsorsSearch:a.state.listSponsorsInit})},a.state={listSponsorsInit:[],listSponsorsSearch:[],isLoading:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),we().then((function(t){console.log(t.data),e.setState({listSponsorsInit:t.data,listSponsorsSearch:t.data}),e.setState({isLoading:!1})})).catch((function(t){e.setState({isLoading:!1}),console.log(t)}))}},{key:"onChange",value:function(e){if(console.log(e),"--"===e)console.log("Reset List"),this.resetList();else{var t=this.state.listSponsorsInit.filter((function(t){return t.domain.toLowerCase().indexOf(e.toLowerCase())>=0}));console.log(t),this.setState({listSponsorsSearch:t})}}},{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"30px",width:"100%"},className:"website-layout-view-container sponsors-list"},r.a.createElement(g.a,null,"Sponsors"),r.a.createElement("div",null,this.state.listSponsorsSearch&&this.state.listSponsorsSearch.length>0&&!this.state.isLoading?this.createSponsorRows(this.state.listSponsorsSearch):this.state.isLoading||0!==this.state.listSponsorsSearch.length?"":r.a.createElement("div",{className:"center-div"},r.a.createElement(v.a,{className:"error-icon",type:"frown"}),"No Sponsors"),this.state.isLoading&&this.createSkeleton()))}}]),t}(n.Component),Oe=a(227),Ce=a(454),je=j.a.TextArea,Ie=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onSend,n=e.onCancel,s=e.receiverEmailAddress,i=e.form.getFieldDecorator;return r.a.createElement(Q.a,{visible:t,footer:null,closable:!1},r.a.createElement(ae.a,{layout:"vertical"},r.a.createElement(ae.a.Item,null,i("Receiver",{initialValue:s,rules:[{required:!0,message:"This field is required"},{type:"email",message:"Invalid email address"}]})(r.a.createElement(j.a,{placeholder:"Receiver email address",disabled:!!s}))),r.a.createElement(ae.a.Item,null,i("Subject",{rules:[{required:!0,message:"This field is required"}]})(r.a.createElement(j.a,{placeholder:"Subject"}))),r.a.createElement(ae.a.Item,null,i("Content",{rules:[{required:!0,message:"This field is required"}]})(r.a.createElement(je,{placeholder:"Content",rows:12}))),r.a.createElement("div",{className:"modal-actions-container"},r.a.createElement(y.a,{className:"btn-secondary-outlined",onClick:n},"Cancel"),r.a.createElement(y.a,{className:"btn-secondary-solid",onClick:a},"Send"))))}}]),t}(n.Component),De=ae.a.create()(Ie);a(453);function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(a,!0).forEach((function(t){Object(Oe.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ue=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).emailsType="RECEIVED_EMAILS",a.onEmailsSelectorChange=function(e){a.setState({selectedEmail:null}),a.emailsType=e.target.value,a.loadEmails()},a.onEmailSelection=function(e){a.setState({selectedEmail:a.state.selectedEmail&&e.id===a.state.selectedEmail.id?null:Pe({},e)})},a.showNewEmailModal=function(){a.setState({newEmailModalVisibility:!0})},a.hideNewEmailModal=function(){a.setState({newEmailModalVisibility:!1}),a.formRef.props.form.resetFields()},a.saveFormRef=function(e){a.formRef=e},a.sendEmail=function(){a.formRef.props.form.validateFields((function(e,t){e||(t.Sender=JSON.parse(localStorage.getItem("CURRENT_USER")).email,console.log(t),T.a.post("https://cors-anywhere.herokuapp.com/https://cluby1.herokuapp.com/api/v1/users/mails",t).then((function(e){a.loadEmails(),a.hideNewEmailModal(),console.log(e)})).catch((function(e){console.log(e)})))}))},a.state={emails:[],selectedEmail:null,newEmailModalVisibility:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"loadEmails",value:function(){var e=this,t="https://cors-anywhere.herokuapp.com/https://cluby1.herokuapp.com/api/v1/users/mails/";if("RECEIVED_EMAILS"===this.emailsType)t+="receiver";else{if("SENT_EMAILS"!==this.emailsType)return;t+="sender"}T.a.get(t+"/"+JSON.parse(localStorage.getItem("CURRENT_USER")).id).then((function(t){console.log(t.data),e.setState({emails:t.data})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.loadEmails()}},{key:"render",value:function(){var e=this,t=this.state.emails,a=this.state.selectedEmail,n=this.state.newEmailModalVisibility;return r.a.createElement("div",{className:"website-layout-content-wrapper"},r.a.createElement("div",{className:"website-layout-view-container"},r.a.createElement("div",{className:"emails-selector-container"},r.a.createElement(Ce.a.Group,{defaultValue:"RECEIVED_EMAILS",buttonStyle:"solid",onChange:this.onEmailsSelectorChange},r.a.createElement(Ce.a.Button,{value:"RECEIVED_EMAILS"},"Received emails"),r.a.createElement(Ce.a.Button,{value:"SENT_EMAILS"},"Sent emails"))),r.a.createElement("div",{className:"card card-elevated emails-card"},r.a.createElement("div",{className:"emails-list-container"},(!t||t.length<=0)&&r.a.createElement(P.a,{description:"No emails..."}),t.sort((function(e,t){return q()(e.sendDate,"YYYY-MM-DD HH:mm:ss").isSameOrBefore(t.sendDate,"YYYY-MM-DD HH:mm:ss")?1:-1})).map((function(t,n){return r.a.createElement("div",{key:t.id,className:a&&a.id===t.id?"email-item-container selected-email":"email-item-container",onClick:function(){return e.onEmailSelection(t)}},r.a.createElement("div",{className:n%2===0?"email-item even":"email-item odd"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"subject"},r.a.createElement("h4",null,t.subject)),r.a.createElement("div",{className:"sent-date"},q()(t.sendDate,"YYYY-MM-DD HH:mm:ss").format("D MMM, YYYY - HH:mm"))),r.a.createElement("div",{className:"name"},"RECEIVED_EMAILS"===e.emailsType?t.sender.firstName+" "+t.sender.lastName:t.receiver.firstName+" "+t.receiver.lastName),r.a.createElement("div",{className:"content-excerpt"},t.content.substring(0,60))))}))),r.a.createElement("div",{className:"email-details-container",style:{flex:a?1:0}},r.a.createElement("div",{className:"email-details"},r.a.createElement("h3",{className:"subject"},a&&a.subject),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"sender"},a&&("RECEIVED_EMAILS"===this.emailsType?"From "+a.sender.firstName:"To "+a.receiver.firstName)),r.a.createElement("div",{className:"sent-date"},a&&q()(a.sendDate,"YYYY-MM-DD HH:mm:ss").format("D MMM, YYYY - HH:mm"))),r.a.createElement("div",{className:"content"},a&&a.content))),"SENT_EMAILS"===this.emailsType&&r.a.createElement(y.a,{className:"btn-secondary-solid btn-circle btn-fab",shape:"circle",icon:"plus",onClick:this.showNewEmailModal})),r.a.createElement(De,{wrappedComponentRef:this.saveFormRef,visible:n,onSend:this.sendEmail,onCancel:this.hideNewEmailModal})))}}]),t}(n.Component),Me=(a(455),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"website-layout-content-wrapper"},r.a.createElement("div",{className:"website-layout-view-container"},r.a.createElement("h1",null,"Edit profile")))}}]),t}(n.Component)),xe=ae.a.create()(Me),Re=(a(456),a(478)),Te=a(470),Ye=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).openSuccessNotification=function(e){Re.a.success({message:"Done",description:e,style:{width:250,marginLeft:85}})},a.openErrorNotification=function(e){Re.a.warn({message:"Done",description:e,style:{width:250,marginLeft:85}})},a.showListPartModal=function(){Q.a.info({title:"List Participators",content:r.a.createElement("div",null,r.a.createElement(Te.a,{itemLayout:"horizontal",dataSource:a.state.eventParticipators,renderItem:function(e){return r.a.createElement(Te.a.Item,null,r.a.createElement(Te.a.Item.Meta,{avatar:r.a.createElement(S.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:r.a.createElement("a",{href:"https://ant.design"},e.user.user.firstName+" "+e.user.user.lastName),description:"Participated at ".concat(e.dateParticipate)}))}})),onOk:function(){}})},a.state={selectedEvent:{},isLoading:!0,currentUser:JSON.parse(localStorage.getItem("CURRENT_USER")),eventParticipators:[],clubId:localStorage.getItem("clubId")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getAllParticipators",value:function(){var e=this;$(this.props.match.params.id).then((function(t){console.log(t.data),e.setState({eventParticipators:t.data})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;console.log("Details");var t=this.props.match.params.id;this.getAllParticipators(),H(t).then((function(t){console.log(t.data),e.setState({selectedEvent:t.data}),e.setState({isLoading:!1})})).catch((function(t){console.log(t),e.setState({isLoading:!1})}))}},{key:"getEventByIdRefresh",value:function(){var e=this,t=this.props.match.params.id;this.getAllParticipators(),H(t).then((function(t){e.setState({selectedEvent:t.data})})).catch((function(e){console.log(e)}))}},{key:"cancelStudentParticipation",value:function(){var e=this;_(this.props.match.params.id,localStorage.getItem("studentId")).then((function(t){e.openErrorNotification("Your participation has been cancelled !"),e.getEventByIdRefresh(),console.log(t)})).catch((function(e){console.log(e)}))}},{key:"addStdntParticipation",value:function(){var e=this;B(this.props.match.params.id,localStorage.getItem("studentId")).then((function(t){e.getEventByIdRefresh(),console.log(t),e.openSuccessNotification("Your participation has been saved !")})).catch((function(e){console.log(e)}))}},{key:"showDeleteConfirm",value:function(){var e=this;Q.a.confirm({title:"Confirm Action",content:"Are you sure delete this task?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){G(e.props.match.params.id).then((function(t){e.openSuccessNotification("The event has been deleted successfully !"),e.props.history.push("/events/club")})).catch((function(t){console.log(t),e.props.history.push("/events/club")}))},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.isLoading?r.a.createElement("div",{style:{padding:"30px",width:"100%"},className:"website-layout-view-container"},r.a.createElement(D.a,{loading:this.state.isLoading,active:!0}),r.a.createElement(D.a,{loading:this.state.isLoading,active:!0}),r.a.createElement(D.a,{loading:this.state.isLoading,active:!0})):r.a.createElement("div",{style:{padding:"30px",width:"100%"},className:"website-layout-view-container"},this.state.currentUser&&"Club"===this.state.currentUser.role&&this.state.clubId===this.state.selectedEvent.club.id?r.a.createElement(de,{isUpdate:"true",eventId:this.props.match.params.id}):"",r.a.createElement("div",{className:"event-details"},r.a.createElement("div",null,r.a.createElement("h2",null,this.state.selectedEvent.name)),r.a.createElement("div",null,r.a.createElement("img",{alt:"event-card",className:"event-image",src:this.state.selectedEvent.photo,onError:function(e){e.target.src=K.a}})),r.a.createElement("div",{className:"description-section"},r.a.createElement("div",{className:"description"},r.a.createElement(g.a,{orientation:"left"},"Description"),r.a.createElement("p",null,this.state.selectedEvent.description)),r.a.createElement("div",{className:"right-section-bottom"},r.a.createElement("h4",{className:"detail-item"},this.state.selectedEvent&&r.a.createElement(d.b,{to:"/clubs/club-details/"+this.state.selectedEvent.club.id},r.a.createElement(v.a,{type:"team",className:"icon"})," ",this.state.selectedEvent.club.name)),r.a.createElement("h4",{className:"detail-item"},r.a.createElement(v.a,{type:"info-circle",className:"icon"}),"Places available: ",this.state.selectedEvent.numberParticipation),r.a.createElement("h4",{className:"detail-item"},r.a.createElement(v.a,{type:"environment",className:"icon"}),this.state.selectedEvent.institute.name),r.a.createElement("h4",{className:"detail-item"},r.a.createElement(v.a,{type:"calendar",className:"icon"}),q()(this.state.selectedEvent.beginDate).format("DD/MM/YYYY HH:mm")," - ",q()(this.state.selectedEvent.endDate).format("DD/MM/YYYY HH:mm")),r.a.createElement("h4",{className:"detail-item"},r.a.createElement(v.a,{type:"dollar",className:"icon"}),this.state.selectedEvent.price," D.T."),r.a.createElement("h4",{className:"detail-item"},r.a.createElement(v.a,{type:"tag",className:"icon"}),this.state.selectedEvent.domain.name)))),r.a.createElement("div",{className:"right-section"},this.state.currentUser&&"Student"===this.state.currentUser.role?this.state.eventParticipators&&-1!=this.state.eventParticipators.map((function(e){return e.user.user.id})).indexOf(this.state.currentUser.id)?r.a.createElement(y.a,{type:"danger",onClick:function(){e.cancelStudentParticipation()}},"Cancel participation"):r.a.createElement(y.a,{className:"btn-secondary-solid",onClick:function(){e.addStdntParticipation()}},"Participate"):"",this.state.currentUser&&"Club"===this.state.currentUser.role&&this.state.clubId===this.state.selectedEvent.club.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:"btn-secondary-solid",onClick:this.showListPartModal},"List Participators"),r.a.createElement(y.a,{style:{height:"30px",lineHeight:0},className:"nb-participant",type:"danger",onClick:function(){e.showDeleteConfirm()}},"Delete")):"",r.a.createElement("span",{className:"nb-participant"},this.state.eventParticipators?this.state.eventParticipators.length:"0"," participated"))))}}]),t}(n.Component),Fe=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props);var e,t=JSON.parse(localStorage.getItem("CURRENT_USER"));(e=t.id,T.a.get(Y+"api/v1/clubs/user/".concat(e))).then((function(e){localStorage.setItem("clubId",e.data.id)})).catch((function(e){console.log("Fetching Club Info error : ",e)}))}},{key:"render",value:function(){return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:k}),r.a.createElement(h.a,{path:"/events/club",component:function(e){return r.a.createElement(Ee,Object.assign({},e,{fetchType:"club"}))}}),r.a.createElement(h.a,{path:"/events/event-details/:id",component:Ye}),r.a.createElement(h.a,{path:"/events/all",component:function(e){return r.a.createElement(Ee,Object.assign({},e,{fetchType:"all"}))}}),r.a.createElement(h.a,{path:"/clubs",component:Se}),r.a.createElement(h.a,{path:"/sponsors",component:ke}),r.a.createElement(h.a,{path:"/emails",component:Ue}),r.a.createElement(h.a,{path:"/edit-profile",component:xe}))}}]),t}(n.Component),Ae=a(139),qe=a.n(Ae),Ve=f.a.Header,He=f.a.Content,_e=f.a.Sider,Be=E.a.SubMenu,Je=[{key:"/",label:"Dashboard",icon:"appstore",link:"/"},{key:"/events",label:"Events",icon:"calendar",children:[{key:"/events/club",label:"Club events",link:"/events/club"},{key:"/events/all",label:"All events",link:"/events/all"}]},{key:"/clubs",label:"Clubs",icon:"deployment-unit",link:"/clubs"},{key:"/sponsors",label:"Sponsors",icon:"user",link:"/sponsors"},{key:"/emails",label:"Emails",icon:"inbox",link:"/emails"}],ze=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleSider=function(){a.setState({isSiderCollapsed:!a.state.isSiderCollapsed})},a.state={isSiderCollapsed:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,t;this.props.currentUser&&"Club"===this.props.currentUser.role&&(e=r.a.createElement(Fe,null),t=Je.slice(0));var a=r.a.createElement(E.a,{mode:"inline",theme:"light",selectedKeys:[this.props.location.pathname],style:{height:"100%",borderRight:0}},t.map((function(e){return e.children&&e.children.length>0?r.a.createElement(Be,{key:e.key,title:r.a.createElement("span",null,r.a.createElement(v.a,{type:e.icon}),e.label)},e.children.map((function(e){return r.a.createElement(E.a.Item,{key:e.key},r.a.createElement("span",null,e.label),r.a.createElement(d.b,{to:e.link}))}))):r.a.createElement(E.a.Item,{key:e.key},r.a.createElement(v.a,{type:e.icon}),r.a.createElement("span",null,e.label),r.a.createElement(d.b,{to:e.link}))})));return r.a.createElement(f.a,{className:"layout"},r.a.createElement(Ve,{className:"backoffice-layout-header"},r.a.createElement("div",{className:"header-item"},r.a.createElement(v.a,{className:"sider-toggle-btn",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggleSider})),r.a.createElement("div",{className:"header-item clickable"},r.a.createElement(d.b,{to:"/"},r.a.createElement("img",{src:qe.a,alt:"Cluby",className:"logo"}))),r.a.createElement("div",{className:"space-filler"}),r.a.createElement("div",{className:"header-item clickable"},r.a.createElement(N,{currentUser:this.props.currentUser}))),r.a.createElement(f.a,null,r.a.createElement(_e,{width:240,collapsedWidth:0,theme:"light",trigger:null,collapsible:!0,collapsed:this.state.isSiderCollapsed,className:"backoffice-layout-main-menu-sider"},a),r.a.createElement(f.a,null,r.a.createElement(He,{className:"backoffice-layout-content-container"},e))))}}]),t}(n.Component),We=Object(h.f)(ze),$e=(a(457),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).showNewEmailModal=function(){a.setState({newEmailModalVisibility:!0})},a.hideNewEmailModal=function(){a.setState({newEmailModalVisibility:!1}),a.formRef.props.form.resetFields()},a.saveFormRef=function(e){a.formRef=e},a.sendEmail=function(){a.formRef.props.form.validateFields((function(e,t){e||(t.Sender=JSON.parse(localStorage.getItem("CURRENT_USER")).email,console.log(t),T.a.post("https://cors-anywhere.herokuapp.com/https://cluby1.herokuapp.com/api/v1/users/mails",t).then((function(e){a.hideNewEmailModal(),console.log(e)})).catch((function(e){console.log(e)})))}))},a.state={club:null,newEmailModalVisibility:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;T.a.get("https://cors-anywhere.herokuapp.com/https://cluby1.herokuapp.com/api/v1/clubs/"+t).then((function(a){var n=a.data;T.a.get("https://cors-anywhere.herokuapp.com/https://cluby1.herokuapp.com/api/v1/events/club/"+t).then((function(t){n.eventsCount=t.data.length,console.log(n),e.setState({club:n})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.club,t=JSON.parse(localStorage.getItem("CURRENT_USER")),a=this.state.newEmailModalVisibility;return r.a.createElement("div",{className:"website-layout-content-wrapper"},r.a.createElement("div",{className:"website-layout-view-container"},e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card card-elevated club-details-card"},r.a.createElement("div",{className:"header-container"},r.a.createElement("img",{className:"club-logo",src:e.photo}),r.a.createElement("h2",{className:"club-name"},e.name),r.a.createElement("p",{className:"club-email"},e.user?e.user.email:"")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"cell left"},r.a.createElement("p",null,e.eventsCount+" events")),r.a.createElement("div",{className:"cell right"},r.a.createElement("p",null,"Since "+q()(e.creationDate,"YYYY-MM-DD").format("YYYY")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"cell left"},r.a.createElement("p",null,e.domain?e.domain.name:"")),r.a.createElement("div",{className:"cell right"},r.a.createElement("p",null,e.institute?e.institute.name+" - "+e.institute.region:""))),r.a.createElement("div",{className:"description-container"},r.a.createElement("h3",null,"About"),r.a.createElement("p",null,e.description)),("Sponsor"===t.role||"Club"===t.role)&&r.a.createElement("div",{className:"actions-container"},r.a.createElement(y.a,{className:"btn-secondary-solid",onClick:this.showNewEmailModal},"Send Email"))),r.a.createElement(De,{wrappedComponentRef:this.saveFormRef,visible:a,onSend:this.sendEmail,onCancel:this.hideNewEmailModal,receiverEmailAddress:e.user.email}))))}}]),t}(n.Component));a(458);var Ge=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onSignIn=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||T.a.post("https://cors-anywhere.herokuapp.com/https://cluby1.herokuapp.com/api/v1/users/authentificate",t).then((function(e){console.log(e),a.props.history.push("/"),it(e.data)})).catch((function(e){console.log(e)}))}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"render",value:function(){var e,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldsError,s=t.getFieldError,i=t.isFieldTouched,l=i("Email")&&s("Email"),o=i("Password")&&s("Password");return r.a.createElement("div",{className:"two-columns-container"},r.a.createElement("div",{className:"column left-column"},r.a.createElement("div",{className:"website-layout-column-content-container"},r.a.createElement("h1",null,"Students events and clubs platform"))),r.a.createElement("div",{className:"column right-column"},r.a.createElement("div",{className:"website-layout-column-content-container"},r.a.createElement("h2",null,"Sign in to your account"),r.a.createElement(ae.a,{layout:"vertical",onSubmit:this.onSignIn},r.a.createElement(ae.a.Item,{validateStatus:l?"error":"",help:l||""},a("Email",{rules:[{required:!0,message:"This field is required"},{type:"email",message:"Invalid email address"}]})(r.a.createElement(j.a,{placeholder:"Email address"}))),r.a.createElement(ae.a.Item,{validateStatus:o?"error":"",help:o||""},a("Password",{rules:[{required:!0,message:"This field is required"}]})(r.a.createElement(j.a,{placeholder:"Password",type:"password"}))),r.a.createElement(ae.a.Item,null,r.a.createElement(y.a,{className:"btn-secondary-solid",block:!0,htmlType:"submit",disabled:(e=n(),Object.keys(e).some((function(t){return e[t]})))},"Sign in"))))))}}]),t}(n.Component);a(459);var Xe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).confirmPassword=function(e,t,n){var r=a.props.form.getFieldValue;t&&t!==r("Password")&&n("Password is not confirmed"),n()},a.onSignUp=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){if(!e){var n={Role:a.state.selectedProfileType,FirstName:t.FirstName,LastName:t.LastName,Email:t.Email,Password:t.Password};T.a.post("https://cors-anywhere.herokuapp.com/https://cluby1.herokuapp.com/api/v1/users/register",n).then((function(){var e={Email:t.Email,Password:t.Password};T.a.post("https://cors-anywhere.herokuapp.com/https://cluby1.herokuapp.com/api/v1/users/authentificate",e).then((function(e){it(e.data),a.props.history.push("/")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}}))},a.state={selectedProfileType:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onProfileTypeSelection",value:function(e){this.setState({selectedProfileType:e})}},{key:"render",value:function(){var e,t=this,a=this.state.selectedProfileType,n=this.props.form,s=n.getFieldDecorator,i=n.getFieldsError,l=n.getFieldError,o=n.isFieldTouched;return r.a.createElement("div",{className:"two-columns-container"},r.a.createElement("div",{className:"column left-column"},r.a.createElement("div",{className:"website-layout-column-content-container"},r.a.createElement("h1",null,"Students events and clubs platform"))),r.a.createElement("div",{className:"column right-column"},r.a.createElement("div",{className:"website-layout-column-content-container"},a.length<=0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"You are?"),r.a.createElement(y.a,{className:"btn-secondary-outlined",block:!0,onClick:function(){return t.onProfileTypeSelection("Student")}},"Student"),r.a.createElement(y.a,{className:"btn-secondary-outlined",block:!0,onClick:function(){return t.onProfileTypeSelection("Club")}},"Club"),r.a.createElement(y.a,{className:"btn-secondary-outlined",block:!0,onClick:function(){return t.onProfileTypeSelection("Sponsor")}},"Sponsor")),a.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Create your account"),r.a.createElement(ae.a,{layout:"vertical",onSubmit:this.onSignUp},r.a.createElement(ae.a.Item,{validateStatus:o("FirstName")&&l("FirstName")?"error":"",help:o("FirstName")&&l("FirstName")||""},s("FirstName",{rules:[{required:!0,whitespace:!0,message:"This field is required"}]})(r.a.createElement(j.a,{placeholder:"First name"}))),r.a.createElement(ae.a.Item,{validateStatus:o("LastName")&&l("LastName")?"error":"",help:o("LastName")&&l("LastName")||""},s("LastName",{rules:[{required:!0,whitespace:!0,message:"This field is required"}]})(r.a.createElement(j.a,{placeholder:"Last name"}))),r.a.createElement(ae.a.Item,{validateStatus:o("Email")&&l("Email")?"error":"",help:o("Email")&&l("Email")||""},s("Email",{rules:[{required:!0,message:"This field is required"},{type:"email",message:"Invalid email address"}]})(r.a.createElement(j.a,{placeholder:"Email address"}))),r.a.createElement(ae.a.Item,{validateStatus:o("Password")&&l("Password")?"error":"",help:o("Password")&&l("Password")||""},s("Password",{rules:[{required:!0,message:"This field is required"},{pattern:/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/g,message:"Weak password"}]})(r.a.createElement(j.a,{placeholder:"Password",type:"password"}))),r.a.createElement(ae.a.Item,{validateStatus:o("PasswordConfirmation")&&l("PasswordConfirmation")?"error":"",help:o("PasswordConfirmation")&&l("PasswordConfirmation")||""},s("PasswordConfirmation",{rules:[{required:!0,message:"This field is required"},{validator:this.confirmPassword}]})(r.a.createElement(j.a,{placeholder:"Password confirmation",type:"password"}))),r.a.createElement(ae.a.Item,null,r.a.createElement(y.a,{className:"btn-secondary-solid",block:!0,htmlType:"submit",disabled:(e=i(),Object.keys(e).some((function(t){return e[t]})))},"Sign up")))))))}}]),t}(n.Component),Ke=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){T.a.get(Y+"api/v1/students/user/"+JSON.parse(localStorage.getItem("CURRENT_USER")).id).then((function(e){localStorage.setItem("studentId",e.data.id)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:Ee}),r.a.createElement(h.a,{path:"/events/event-details/:id",component:Ye}),r.a.createElement(h.a,{path:"/clubs/club-details/:id",component:$e}),r.a.createElement(h.a,{path:"/sign-in",component:Ge}),r.a.createElement(h.a,{path:"/sign-up",component:Xe}),r.a.createElement(h.a,{path:"/edit-profile",component:xe}))}}]),t}(n.Component),Ze=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:Ee}),r.a.createElement(h.a,{path:"/events/event-details/:id",component:Ye}),r.a.createElement(h.a,{path:"/clubs/club-details/:id",component:$e}),r.a.createElement(h.a,{path:"/emails",component:Ue}),r.a.createElement(h.a,{path:"/edit-profile",component:xe}))}}]),t}(n.Component),Qe=ae.a.create()(Ge),et=ae.a.create()(Xe),tt=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:Ee}),r.a.createElement(h.a,{path:"/events/event-details/:id",component:Ye}),r.a.createElement(h.a,{path:"/clubs/club-details/:id",component:$e}),r.a.createElement(h.a,{path:"/sign-in",component:Qe}),r.a.createElement(h.a,{path:"/sign-up",component:et}))}}]),t}(n.Component),at=f.a.Header,nt=f.a.Content,rt=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e;return e=this.props.currentUser&&"Student"===this.props.currentUser.role?r.a.createElement(Ke,null):this.props.currentUser&&"Sponsor"===this.props.currentUser.role?r.a.createElement(Ze,null):r.a.createElement(tt,null),r.a.createElement(f.a,{className:"layout"},r.a.createElement(at,{className:"website-layout-header"},r.a.createElement("div",{className:"website-layout-content-wrapper"},r.a.createElement("div",{className:"header-content-container"},r.a.createElement("div",{className:"header-item clickable"},r.a.createElement(d.b,{to:"/"},r.a.createElement("img",{src:qe.a,alt:"Cluby",className:"logo"}))),r.a.createElement("div",{className:"space-filler"}),this.props.currentUser&&"Sponsor"===this.props.currentUser.role&&r.a.createElement("div",{className:"header-item clickable"},r.a.createElement(d.b,{to:"/emails"},r.a.createElement(v.a,{type:"mail"}))),this.props.currentUser?r.a.createElement("div",{className:"header-item clickable"},r.a.createElement(N,{currentUser:this.props.currentUser})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header-item clickable"},r.a.createElement(d.b,{to:"/sign-up"},"Sign up")),r.a.createElement("div",{className:"header-item clickable"},r.a.createElement(d.b,{to:"/sign-in"},"Sign in")))))),r.a.createElement(nt,null,e))}}]),t}(n.Component),st=new p.a,it=function(e){return st.next(e)},lt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).currentUserSubscription=null,a.state={currentUser:JSON.parse(localStorage.getItem("CURRENT_USER"))},a.currentUserSubscription=st.subscribe((function(e){localStorage.setItem("CURRENT_USER",JSON.stringify(e)),a.setState({currentUser:e})})),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,t=this.state.currentUser;return e=t&&"Club"===t.role?r.a.createElement(We,{currentUser:t}):r.a.createElement(rt,{currentUser:t}),r.a.createElement(d.a,null,e)}},{key:"componentWillUnmount",value:function(){this.currentUserSubscription.unsubscribe()}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(lt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},69:function(e,t,a){e.exports=a.p+"static/media/placeholder.0e2b3312.png"},95:function(e,t,a){}},[[230,1,2]]]);
//# sourceMappingURL=main.da575a46.chunk.js.map